<div class="body">
  <div class="container">

    <% if @user.errors.any? %>
      <div id="error_explanation">
        <h3><%= @user.errors.count %> 件のエラーがあります:</h3>
        <ul>
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

user#edit
<div class="container">
  <div class="row">
	<div class='col-xs-3'>
		<h2>user info</h2>
			<%= form_for(@user) do |f| %>
			    <div>
			        <label>名前</label>
			        <%= f.text_field :name, id:"inputEmail", placeholder:"名前"%>
			    </div>
			    <div>
			        <h5>画像</h5>
			          <div id="image_view"></div>
			          <%= attachment_image_tag @user, :profile_image, :fill, 50, 50, fallback: "no_image.jpg", id:"orgin_img" %>

			          <label for="image_btn">
			          <%= f.attachment_field :profile_image, id: "image_btn" %>
			          </label>
			    </div>
			    <div>
			        <label>自己紹介</label>
			        <%= f.text_area :introduction, placeholder:"自己紹介 最大５０文字"%>
			        <%= f.submit "更新する"%>
			    </div>
			<% end %>
	</div>
  </div>
</div>

<script>
      $(function() {
          $('#image_btn').on('change', function(e) {
              // 1枚だけ表示する
              var file = e.target.files[0];
              console.log(file);
              if ( !file ){
                  $('#image_view').html("");
                  $('#orgin_img').show();
                  return;
              }
              // ファイルリーダー作成
              var fileReader = new FileReader();
              if (file.type == 'video/mp4') {
                  var dom = $("<video>");
              }
              else{
                  var dom = $("<img>");
              }
              dom.attr('style','width:100%');
              fileReader.onload = function() {
                  // Data URIを取得
                  console.log(this.result);
                  var dataUri = this.result;
                  dom.attr('src', dataUri);
                  // img要素に表示
                  $('#image_view').html(dom);
              }
              // ファイルをData URIとして読み込む
              fileReader.readAsDataURL(file);
              $('#orgin_img').hide();
          });
      });
</script>

  </div>
</div>